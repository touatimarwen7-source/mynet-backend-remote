{
  "version": "1.0.0",
  "lastUpdate": "2025-11-27T22:30:00Z",
  "migrations": [
    {
      "id": "001_initial_schema",
      "version": "1.0.0",
      "timestamp": "2025-11-27T22:30:00Z",
      "description": "Initial database schema with constraints",
      "tables": [
        "users",
        "tenders",
        "offers",
        "invoices",
        "audit_logs",
        "addenda",
        "refresh_tokens"
      ],
      "constraints": {
        "users": [
          "NOT NULL: id, email, username, password_hash, role, created_at",
          "UNIQUE: email, username",
          "DEFAULT: role='viewer', created_at=NOW(), is_active=true"
        ],
        "tenders": [
          "NOT NULL: id, title, buyer_id, budget_max, deadline, created_at",
          "DEFAULT: status='open', created_at=NOW()",
          "FOREIGN KEY: buyer_id REFERENCES users(id)"
        ],
        "offers": [
          "NOT NULL: id, tender_id, supplier_id, price, created_at",
          "DEFAULT: status='submitted', created_at=NOW()",
          "FOREIGN KEY: tender_id REFERENCES tenders(id), supplier_id REFERENCES users(id)"
        ],
        "refresh_tokens": [
          "NOT NULL: id, user_id, token, expires_at",
          "UNIQUE: token",
          "FOREIGN KEY: user_id REFERENCES users(id)"
        ]
      },
      "status": "completed"
    }
  ],
  "pendingChanges": []
}
